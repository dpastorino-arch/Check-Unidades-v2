<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Check de Unidades — Oil & Gas</title>

  <!-- PWA -->
  <meta name="theme-color" content="#0f172a">
  <meta name="description" content="Checklist de unidades (Oil & Gas) — acceso rápido a Google Forms.">
  <link rel="manifest" href="./manifest.webmanifest">
  <link rel="icon" href="./icons/icon-192.png">
  <link rel="apple-touch-icon" href="./icons/icon-192.png">

  <!-- Framework CSS (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Fuente -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
  </style>
</head>

<body class="min-h-screen bg-slate-50 text-slate-900">

  <!-- Header -->
  <header class="bg-white border-b border-slate-200">
    <div class="max-w-5xl mx-auto px-4 py-4 flex items-center gap-4">
      <!-- LOGO: reemplazar src (URL pública o archivo local) -->
      <img
        id="companyLogo"
        src="./LOGO%20VDS.jpeg"
        alt="Logo Empresa"
        class="h-10 w-auto"
      />
      <div class="flex-1">
        <h1 class="text-xl font-semibold">Checklist de Unidades</h1>
        <p class="text-sm text-slate-500">Seleccioná el tipo de vehículo/equipo</p>
      </div>

      <button
        id="howtoBtn"
        class="rounded-xl bg-slate-900 px-4 py-2.5 text-sm font-semibold text-white hover:bg-slate-800 active:scale-[0.99] transition"
        type="button"
      >
        ¿Dónde cambio links?
      </button>
    </div>
  </header>

  <!-- Main -->
  <main class="max-w-5xl mx-auto px-4 py-10">
    <section class="mb-6">
      <h2 class="text-lg font-semibold mb-2">Menú de unidades</h2>
      <p class="text-sm text-slate-600">
        Tocá un botón para abrir el Google Form del checklist correspondiente.
      </p>
      <p class="mt-2 text-xs text-slate-500">
        Nota: Para volver al menú, usá “Atrás” del navegador o configurá el enlace de retorno en el mensaje de confirmación del Form (ver botón “¿Dónde cambio links?”).
      </p>
    </section>

    <!-- Botones -->
    <section id="buttonsGrid" class="grid grid-cols-1 sm:grid-cols-2 gap-4"></section>

    <!-- PWA hint -->
    <div class="mt-8 rounded-2xl border border-slate-200 bg-white p-5">
      <div class="text-sm font-semibold">Acceso directo en el celular (PWA)</div>
      <ul class="mt-2 text-sm text-slate-600 list-disc pl-5 space-y-1">
        <li>Android (Chrome): Menú ⋮ → <span class="font-semibold">“Instalar app”</span> o <span class="font-semibold">“Agregar a pantalla principal”</span>.</li>
        <li>iPhone (Safari): Compartir → <span class="font-semibold">“Agregar a pantalla de inicio”</span>.</li>
      </ul>
      <div class="mt-2 text-xs text-slate-500">Requiere publicar por HTTPS o localhost.</div>
    </div>
  </main>

  <!-- Modal -->
  <div id="modalBackdrop" class="hidden fixed inset-0 z-50 bg-slate-900/40 p-4">
    <div class="mx-auto max-w-2xl rounded-2xl bg-white shadow-xl border border-slate-200 overflow-hidden">
      <div class="flex items-center justify-between px-5 py-4 border-b border-slate-200">
        <h3 class="text-base font-semibold">Configuración (links / retorno)</h3>
        <button id="modalClose" class="rounded-lg px-2 py-1 text-slate-600 hover:bg-slate-100" type="button">✕</button>
      </div>
      <div class="p-5 space-y-4 text-sm text-slate-700">
        <div>
          <div class="font-semibold">1) Links a Google Forms</div>
          <p class="mt-1">
            En el bloque <span class="font-mono bg-slate-100 px-1.5 py-0.5 rounded">const UNITS</span> (abajo),
            reemplazá <span class="font-mono bg-slate-100 px-1.5 py-0.5 rounded">formUrl</span> por el link real del Form.
          </p>
        </div>

        <div>
          <div class="font-semibold">2) Volver del Form al menú</div>
          <p class="mt-1">
            Google Forms no permite “redireccionar automáticamente” al enviar. Las alternativas prácticas son:
          </p>
          <ul class="mt-2 list-disc pl-5 space-y-1">
            <li><span class="font-semibold">Opción recomendada:</span> En cada Form → <span class="font-semibold">Configuración</span> → <span class="font-semibold">Presentación</span> → <span class="font-semibold">Mensaje de confirmación</span>. Pegá un link al menú (la URL donde publiques esta app).</li>
            <li><span class="font-semibold">Usar el botón Atrás del navegador:</span> si el Form se abre en la misma pestaña, el usuario vuelve con “Atrás”.</li>
            <li><span class="font-semibold">Abrir en pestaña nueva:</span> (por defecto en esta app) al cerrar esa pestaña, el usuario queda en el menú.</li>
          </ul>
          <p class="mt-2 text-xs text-slate-500">
            Si la app está instalada como PWA, el Form abrirá en el navegador del sistema; el retorno es “Atrás” o cerrar la pestaña.
          </p>
        </div>

        <div>
          <div class="font-semibold">3) Logo</div>
          <p class="mt-1">
            En <span class="font-mono bg-slate-100 px-1.5 py-0.5 rounded">&lt;img id="companyLogo"&gt;</span> reemplazá el <span class="font-mono bg-slate-100 px-1.5 py-0.5 rounded">src</span>.
          </p>
        </div>

        <div class="rounded-xl bg-amber-50 border border-amber-200 p-4">
          <div class="font-semibold text-amber-900">Nota PWA</div>
          <p class="mt-1 text-amber-900/90">
            Para que “Instalar app” aparezca, publicá esta carpeta por HTTPS (GitHub Pages, Cloudflare Pages, Netlify, etc.).
          </p>
        </div>
      </div>
      <div class="px-5 py-4 border-t border-slate-200 flex justify-end">
        <button id="modalOk" class="rounded-xl bg-slate-900 px-4 py-2.5 text-sm font-semibold text-white hover:bg-slate-800" type="button">
          Entendido
        </button>
      </div>
    </div>
  </div>

  <footer class="border-t border-slate-200 bg-white mt-10">
    <div class="max-w-5xl mx-auto px-4 py-4 text-xs text-slate-500">
      © <span id="year"></span> Checklist de Unidades
    </div>
  </footer>

  <script>
    // Unidades en array (mantenible)
    const UNITS = [
      { key: "alto_vacio",    label: "Equipo Alto Vacío",              formUrl: "https://forms.gle/REEMPLAZAR_ALTO_VACIO" },
      { key: "vacio",         label: "Equipo Vacío",                   formUrl: "https://forms.gle/REEMPLAZAR_VACIO" },
      { key: "tractor_hidro", label: "Tractor con Hidrogrúa",          formUrl: "https://forms.gle/REEMPLAZAR_TRACTOR_HIDROGRUA" },
      { key: "tractor",       label: "Tractor",                        formUrl: "https://forms.gle/REEMPLAZAR_TRACTOR" },
      { key: "semi",          label: "Semi",                           formUrl: "https://forms.gle/REEMPLAZAR_SEMI" },
      { key: "hidrocateo",    label: "Equipo de Hidrocateo",           formUrl: "https://forms.gle/REEMPLAZAR_HIDROCATEO" },
      { key: "portavolquete", label: "Portavolquete (Simple / Doble)", formUrl: "https://docs.google.com/forms/d/e/1FAIpQLSdb4MQuDbuJF01FvPhvHZiuTPj4VdvFt2UuAD4sy4EBwo9HSA/viewform?usp=dialog" },
      { key: "pickup",        label: "Pick Up",                        formUrl: "https://forms.gle/REEMPLAZAR_PICKUP" },
      { key: "minipala",      label: "Minipala",                       formUrl: "https://forms.gle/REEMPLAZAR_MINIPALA" },
      { key: "caldera",       label: "Caldera",                        formUrl: "https://forms.gle/REEMPLAZAR_CALDERA" },
      { key: "cisterna",      label: "Cisterna",                       formUrl: "https://forms.gle/REEMPLAZAR_CISTERNA" }
    ];

    const grid = document.getElementById("buttonsGrid");
    document.getElementById("year").textContent = new Date().getFullYear();

    // Modal
    const howtoBtn = document.getElementById("howtoBtn");
    const modalBackdrop = document.getElementById("modalBackdrop");
    const modalClose = document.getElementById("modalClose");
    const modalOk = document.getElementById("modalOk");
    function openModal(){ modalBackdrop.classList.remove("hidden"); }
    function closeModal(){ modalBackdrop.classList.add("hidden"); }
    howtoBtn.addEventListener("click", openModal);
    modalClose.addEventListener("click", closeModal);
    modalOk.addEventListener("click", closeModal);
    modalBackdrop.addEventListener("click", (e) => { if (e.target === modalBackdrop) closeModal(); });

    function renderButtons(list) {
      grid.innerHTML = "";
      list.forEach(u => {
        const a = document.createElement("a");
        a.href = u.formUrl;
        // Se abre en pestaña nueva para que el menú quede disponible
        a.target = "_blank";
        a.rel = "noopener noreferrer";
        a.className = [
          "flex items-center justify-center text-center",
          "rounded-2xl bg-slate-900 text-white",
          "py-7 px-4 text-lg font-semibold",
          "hover:bg-slate-800 transition",
          "active:scale-[0.99]"
        ].join(" ");
        a.textContent = u.label;
        grid.appendChild(a);
      });
    }
    renderButtons(UNITS);

    // PWA: Service Worker (cache básico del app shell)
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", async () => {
        try { await navigator.serviceWorker.register("./sw.js"); }
        catch (e) { console.warn("SW no registrado:", e); }
      });
    }
  </script>
</body>
</html>
